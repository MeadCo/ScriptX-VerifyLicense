import{t as Y,a as J}from"../chunks/CgtIvP4o.js";import{i as fe}from"../chunks/Ddisd3R5.js";import{h as D,al as ue,t as ce,am as de,B as xe,k as pe,C as ge,w as s,D as me,I as v,Q as he,F as f,a7 as c,X as g,G as u,a8 as p}from"../chunks/D-wryjgi.js";import{l as be,e as Q,s as U}from"../chunks/D-E2lVHr.js";import{i as _e}from"../chunks/B2ET3CS3.js";import{r as _}from"../chunks/CTMF2TM4.js";import{o as ye}from"../chunks/Bo0lCHBO.js";const k=[...` 	
\r\fÂ \v\uFEFF`];function ze(e,d,o){var t=e==null?"":""+e;if(o){for(var i in o)if(o[i])t=t?t+" "+i:i;else if(t.length)for(var a=i.length,r=0;(r=t.indexOf(i,r))>=0;){var n=r+a;(r===0||k.includes(t[r-1]))&&(n===t.length||k.includes(t[n]))?t=(r===0?"":t.substring(0,r))+t.substring(n+1):r=n}}return t===""?null:t}function K(e,d,o,t,i,a){var r=e.__className;if(D||r!==o||r===void 0){var n=ze(o,t,a);(!D||n!==e.getAttribute("class"))&&(n==null?e.removeAttribute("class"):e.className=n),e.__className=o}else if(a&&i!==a)for(var m in a){var z=!!a[m];(i==null||z!==!!i[m])&&e.classList.toggle(m,z)}return a}function y(e,d,o=d){var t=ue();be(e,"input",i=>{var a=i?e.defaultValue:e.value;if(a=F(e)?I(a):a,o(a),t&&a!==(a=d())){var r=e.selectionStart,n=e.selectionEnd;e.value=a??"",n!==null&&(e.selectionStart=r,e.selectionEnd=Math.min(n,e.value.length))}}),(D&&e.defaultValue!==e.value||ce(d)==null&&e.value)&&o(F(e)?I(e.value):e.value),de(()=>{var i=d();F(e)&&i===I(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function F(e){var d=e.type;return d==="number"||d==="range"}function I(e){return e===""?null:+e}const we=!0,Ie=Object.freeze(Object.defineProperty({__proto__:null,prerender:we},Symbol.toStringTag,{value:"Module"}));var Ve=Y('<div class="overlay svelte-1zsxfr"><div class="spinner svelte-1zsxfr"></div> <div class="loading-text svelte-1zsxfr">Verifying license...</div></div>'),Se=Y('<div class="card svelte-1zsxfr"><div class="header svelte-1zsxfr"><h2 class="svelte-1zsxfr">MeadCo ScriptX License Verification</h2> <h3 class="svelte-1zsxfr"> </h3></div> <div class="form-group with-label svelte-1zsxfr"><label class="group-label svelte-1zsxfr" for="license-input">GUID *</label> <input id="license-input" type="text" placeholder="xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx" class="svelte-1zsxfr"></div> <div class="form-group with-label svelte-1zsxfr"><label class="group-label svelte-1zsxfr" for="url-input">Url *</label> <input id="url-input" type="text" placeholder="Warehouse or URI" class="svelte-1zsxfr"></div> <div class="header svelte-1zsxfr"><h2 class="svelte-1zsxfr">License Summary</h2></div> <div>Issued to: <strong class="svelte-1zsxfr"> </strong></div> <div><div class="form-group with-label svelte-1zsxfr"><label class="group-label svelte-1zsxfr" for="revision-input">Revision</label> <input readonly="" id="revision-input" type="number" class="svelte-1zsxfr"></div> <div class="form-group with-label svelte-1zsxfr"><label class="group-label svelte-1zsxfr" for="valid-from-input">Valid From</label> <input readonly="" id="valid-from-input" type="date" class="svelte-1zsxfr"></div> <div class="form-group with-label svelte-1zsxfr"><label class="group-label svelte-1zsxfr" for="valid-until-input">Valid Until</label> <input readonly="" id="valid-until-input" type="date" class="svelte-1zsxfr"></div></div> <div class="button-row svelte-1zsxfr"><button class="green verify-button svelte-1zsxfr"> </button> <button class="blue print-button svelte-1zsxfr">Details ...</button></div></div> <a href="print" style="display:none" class="svelte-1zsxfr">Print</a> <!>',1);function De(e,d){xe(d,!1);let o=g(""),t=g(!1),i=g(!1),a=g(!1),r=g({revision:0,from:"",to:"",company:"",guid:""}),n=g(" [.connecting..]");ye(async()=>{console.log("onMount connect lite....");try{MeadCo.ScriptX.Print.connectLite("http://127.0.0.1:41191",""),c(n,await new Promise((l,x)=>{MeadCo.ScriptX.Print.serviceVersionAsync(l,x)})),c(n,s(n).major+"."+s(n).minor+"."+s(n).revision),console.log("serviceVersion",s(n)),c(a,!0)}catch(l){alert(l),c(n," [.failed..]")}});function m(l){return/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(l)}function z(){return typeof window<"u"?window.location.protocol==="https:":!1}function Z(l){try{return l.toLowerCase()==="warehouse"||l.toLowerCase()==="securewarehouse"?z()?"securewarehouse":l:new URL(l)}catch{return""}}async function ee(l,x){console.log("start verify"),c(t,!0),c(i,!1);try{let b=await new Promise((oe,ve)=>{MeadCo.ScriptX.Print.Licensing.applyAsync(l,0,x,oe,ve)});console.log("License details:",b),c(r,b),p(r,s(r).from=s(r).from.split("T")[0]),p(r,s(r).to=s(r).to.split("T")[0]),p(r,s(r).url=x),c(i,!0)}catch(b){c(i,!1),alert("An error occurred while verifying the license: "+b),console.error(b)}finally{console.log("end verify"),c(t,!1)}}function re(){if(!m(s(r).guid)){alert("Please enter a valid GUID for the license.");return}if(c(o,Z(s(o))),s(o)===""){alert('Please enter "warehouse" or a valid URL.');return}ee(s(r).guid,s(o))}function se(){typeof window<"u"&&(sessionStorage.setItem("licenseData",JSON.stringify(s(r))),window.location.href="print.html")}fe();var R=Se(),S=pe(R),L=f(S),X=v(f(L),2),le=f(X);u(X),u(L);var A=v(L,2),N=v(f(A),2);_(N),u(A);var P=v(A,2),G=v(f(P),2);_(G),u(P);var w=v(P,4);let O;var j=v(f(w)),te=f(j,!0);u(j),u(w);var V=v(w,2);let T;var C=f(V),$=v(f(C),2);_($),u(C);var M=v(C,2),E=v(f(M),2);_(E),u(M);var W=v(M,2),q=v(f(W),2);_(q),u(W),u(V);var B=v(V,2),h=f(B),ie=f(h,!0);u(h);var H=v(h,2);u(B),u(S);var ae=v(S,4);{var ne=l=>{var x=Ve();J(l,x)};_e(ae,l=>{s(t)&&l(ne)})}ge((l,x)=>{U(le,`v1.0.7 using ScriptX Services for Windows PC v${s(n)??""}`),O=K(w,1,"issued-to svelte-1zsxfr",null,O,l),U(te,s(r).company||"Not verified"),T=K(V,1,"form-row svelte-1zsxfr",null,T,x),h.disabled=s(t)||!s(a),U(ie,s(t)?"Verifying...":"Verify license"),H.disabled=!s(i)||!s(a)},[()=>({loading:s(t)}),()=>({loading:s(t)})],he),y(N,()=>s(r).guid,l=>p(r,s(r).guid=l)),y(G,()=>s(o),l=>c(o,l)),y($,()=>s(r).revision,l=>p(r,s(r).revision=l)),y(E,()=>s(r).from,l=>p(r,s(r).from=l)),y(q,()=>s(r).to,l=>p(r,s(r).to=l)),Q("click",h,re),Q("click",H,se),J(e,R),me()}export{De as component,Ie as universal};

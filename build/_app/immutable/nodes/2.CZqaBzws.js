import{t as Y,a as J}from"../chunks/CgtIvP4o.js";import{i as ve}from"../chunks/Ddisd3R5.js";import{h as D,al as fe,t as ue,am as de,B as ce,k as xe,C as pe,w as s,D as ge,I as o,Q as me,F as f,a7 as x,X as h,G as u,a8 as p}from"../chunks/D-wryjgi.js";import{l as he,e as Q,s as C}from"../chunks/D-E2lVHr.js";import{i as be}from"../chunks/B2ET3CS3.js";import{r as b}from"../chunks/CTMF2TM4.js";import{o as _e}from"../chunks/Bo0lCHBO.js";const k=[...` 	
\r\fÂ \v\uFEFF`];function ye(r,d,n){var l=r==null?"":""+r;if(n){for(var i in n)if(n[i])l=l?l+" "+i:i;else if(l.length)for(var e=i.length,a=0;(a=l.indexOf(i,a))>=0;){var v=a+e;(a===0||k.includes(l[a-1]))&&(v===l.length||k.includes(l[v]))?l=(a===0?"":l.substring(0,a))+l.substring(v+1):a=v}}return l===""?null:l}function K(r,d,n,l,i,e){var a=r.__className;if(D||a!==n||a===void 0){var v=ye(n,l,e);(!D||v!==r.getAttribute("class"))&&(v==null?r.removeAttribute("class"):r.className=v),r.__className=n}else if(e&&i!==e)for(var g in e){var y=!!e[g];(i==null||y!==!!i[g])&&r.classList.toggle(g,y)}return e}function _(r,d,n=d){var l=fe();he(r,"input",i=>{var e=i?r.defaultValue:r.value;if(e=F(r)?I(e):e,n(e),l&&e!==(e=d())){var a=r.selectionStart,v=r.selectionEnd;r.value=e??"",v!==null&&(r.selectionStart=a,r.selectionEnd=Math.min(v,r.value.length))}}),(D&&r.defaultValue!==r.value||ue(d)==null&&r.value)&&n(F(r)?I(r.value):r.value),de(()=>{var i=d();F(r)&&i===I(r.value)||r.type==="date"&&!i&&!r.value||i!==r.value&&(r.value=i??"")})}function F(r){var d=r.type;return d==="number"||d==="range"}function I(r){return r===""?null:+r}const ze=!0,Fe=Object.freeze(Object.defineProperty({__proto__:null,prerender:ze},Symbol.toStringTag,{value:"Module"}));var we=Y('<div class="overlay svelte-1zsxfr"><div class="spinner svelte-1zsxfr"></div> <div class="loading-text svelte-1zsxfr">Verifying license...</div></div>'),Ve=Y('<div class="card svelte-1zsxfr"><div class="header svelte-1zsxfr"><h2 class="svelte-1zsxfr">MeadCo ScriptX License Verification</h2> <h3 class="svelte-1zsxfr"> </h3></div> <div class="form-group with-label svelte-1zsxfr"><label class="group-label svelte-1zsxfr" for="license-input">GUID *</label> <input id="license-input" type="text" placeholder="xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx" class="svelte-1zsxfr"></div> <div class="form-group with-label svelte-1zsxfr"><label class="group-label svelte-1zsxfr" for="url-input">Url *</label> <input id="url-input" type="text" placeholder="Warehouse or URI" class="svelte-1zsxfr"></div> <div class="header svelte-1zsxfr"><h2 class="svelte-1zsxfr">License Summary</h2></div> <div>Issued to: <strong class="svelte-1zsxfr"> </strong></div> <div><div class="form-group with-label svelte-1zsxfr"><label class="group-label svelte-1zsxfr" for="revision-input">Revision</label> <input readonly="" id="revision-input" type="number" class="svelte-1zsxfr"></div> <div class="form-group with-label svelte-1zsxfr"><label class="group-label svelte-1zsxfr" for="valid-from-input">Valid From</label> <input readonly="" id="valid-from-input" type="date" class="svelte-1zsxfr"></div> <div class="form-group with-label svelte-1zsxfr"><label class="group-label svelte-1zsxfr" for="valid-until-input">Valid Until</label> <input readonly="" id="valid-until-input" type="date" class="svelte-1zsxfr"></div></div> <div class="button-row svelte-1zsxfr"><button class="green verify-button svelte-1zsxfr"> </button> <button class="blue print-button svelte-1zsxfr">Details ...</button></div></div> <a href="print" style="display:none" class="svelte-1zsxfr">Print</a> <!>',1);function Ie(r,d){ce(d,!1);let n=h(""),l=h(!1),i=h(!1),e=h({revision:0,from:"",to:"",company:"",guid:""}),a=h("0.0.0");_e(async()=>{console.log("onMount connect lite...."),MeadCo.ScriptX.Print.connectLite("http://127.0.0.1:41191",""),x(a,await new Promise((t,c)=>{MeadCo.ScriptX.Print.serviceVersionAsync(t,c)})),x(a,s(a).major+"."+s(a).minor+"."+s(a).revision),console.log("serviceVersion",s(a))});function v(t){return/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(t)}function g(){return typeof window<"u"?window.location.protocol==="https:":!1}function y(t){try{return t.toLowerCase()==="warehouse"?g()?"securewarehouse":t:new URL(t)}catch{return""}}async function Z(t,c){console.log("start verify"),x(l,!0),x(i,!1);try{let V=await new Promise((ne,oe)=>{MeadCo.ScriptX.Print.Licensing.applyAsync(t,0,c,ne,oe)});console.log("License details:",V),x(e,V),p(e,s(e).from=s(e).from.split("T")[0]),p(e,s(e).to=s(e).to.split("T")[0]),p(e,s(e).url=c),x(i,!0)}catch(V){x(i,!1),alert("An error occurred while verifying the license."),console.error(V)}finally{console.log("end verify"),x(l,!1)}}function ee(){if(!v(s(e).guid)){alert("Please enter a valid GUID for the license.");return}if(x(n,y(s(n))),s(n)===""){alert('Please enter "warehouse" or a valid URL.');return}Z(s(e).guid,s(n))}function re(){typeof window<"u"&&(sessionStorage.setItem("licenseData",JSON.stringify(s(e))),window.location.href="print.html")}ve();var R=Ve(),S=xe(R),L=f(S),X=o(f(L),2),se=f(X);u(X),u(L);var A=o(L,2),N=o(f(A),2);b(N),u(A);var P=o(A,2),G=o(f(P),2);b(G),u(P);var z=o(P,4);let O;var j=o(f(z)),le=f(j,!0);u(j),u(z);var w=o(z,2);let T;var M=f(w),$=o(f(M),2);b($),u(M);var U=o(M,2),E=o(f(U),2);b(E),u(U);var W=o(U,2),q=o(f(W),2);b(q),u(W),u(w);var B=o(w,2),m=f(B),te=f(m,!0);u(m);var H=o(m,2);u(B),u(S);var ie=o(S,4);{var ae=t=>{var c=we();J(t,c)};be(ie,t=>{s(l)&&t(ae)})}pe((t,c)=>{C(se,`v1.0.6 using ScriptX Services for Windows PC v${s(a)??""}`),O=K(z,1,"issued-to svelte-1zsxfr",null,O,t),C(le,s(e).company||"Not verified"),T=K(w,1,"form-row svelte-1zsxfr",null,T,c),m.disabled=s(l),C(te,s(l)?"Verifying...":"Verify license"),H.disabled=!s(i)},[()=>({loading:s(l)}),()=>({loading:s(l)})],me),_(N,()=>s(e).guid,t=>p(e,s(e).guid=t)),_(G,()=>s(n),t=>x(n,t)),_($,()=>s(e).revision,t=>p(e,s(e).revision=t)),_(E,()=>s(e).from,t=>p(e,s(e).from=t)),_(q,()=>s(e).to,t=>p(e,s(e).to=t)),Q("click",m,ee),Q("click",H,re),J(r,R),ge()}export{Ie as component,Fe as universal};
